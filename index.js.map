{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n// У файлі pixabay-api.js зберігай функції для HTTP-запитів.\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '47377871-88caea6ffc61c5284332b3ad8';\n\nexport async function serviceImages(search, page = 1) {\n  const { data } = await axios(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: search,\n      page,\n      per_page: 15,\n    },\n  });\n  return data;\n}\n","export function createMarkUp(arr) {\n  return arr\n    .map(\n      ({\n        id,\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\" data-id=\"${id}\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <span class=\"loader\"></span>\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n      style=\"display: none;\"\n      onload=\"this.style.display='block'; this.previousElementSibling.style.display='none';\"\n    />\n    <ul class=\"list-infoImg\">\n    <li class=\"item-infoImg\"><span>Likes</span>${likes}</li>\n    <li class=\"item-infoImg\"><span>Views</span>${views}</li>\n    <li class=\"item-infoImg\"><span>Comments</span>${comments}</li>\n    <li class=\"item-infoImg\"><span>Downloads</span>${downloads}</li>\n    </ul>\n  </a>\n</li>`\n    )\n    .join('');\n}\n\nexport function showLoadingMessage(loadingMessage) {\n  loadingMessage.style.display = 'block';\n}\n\nexport function hideLoadingMessage(loadingMessage) {\n  loadingMessage.style.display = 'none';\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport errorImage from './img/error.svg';\nimport { serviceImages } from './js/pixabay-api';\nimport {\n  createMarkUp,\n  showLoadingMessage,\n  hideLoadingMessage,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loadingMessage = document.querySelector('.loading-message');\nconst loadMore = document.querySelector('.js-load-more');\n\nform.addEventListener('submit', handleSearch);\n// loadMore.addEventListener('click', onLoadMore);\nlet search = '';\nlet page = 1;\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  search = event.target.elements.search.value.trim();\n  searchImages();\n}\n\n// serviceImages(search, page)\n//   .then(data => {\n//     console.log(data);\n//     console.log(Math.ceil(data.totalHits / 15)); //total page\n//   })\n//   .catch(error => console.log(error.message));\n\nfunction searchImages() {\n  showLoadingMessage(loadingMessage);\n\n  serviceImages(search, page)\n    .then(data => {\n      hideLoadingMessage(loadingMessage);\n      gallery.insertAdjacentHTML('beforeend', createMarkUp(data.hits));\n      if (page < Math.ceil(data.totalHits / 15)) {\n        loadMore.classList.replace('load-more-hidden', 'load-more');\n      }\n    })\n    .catch(error => alert(error.message));\n}\n\n// function searchImages() {\n//   showLoadingMessage(loadingMessage);\n\n//   fetchImages(search)\n//     .then(data => {\n//       hideLoadingMessage(loadingMessage);\n//       if (data.hits.length === 0) {\n//         gallery.innerHTML = '';\n\n//         iziToast.show({\n//           title: '',\n//           iconUrl: `${errorImage}`,\n//           message:\n//             'Sorry, there are no images matching your search query. Please try again!',\n//           messageColor: 'white',\n//           messageSize: '16px',\n//           backgroundColor: 'red',\n//           position: 'topRight',\n//         });\n//       } else {\n//         gallery.innerHTML = createMarkUp(data.hits);\n//         galleryLightbox.refresh();\n//       }\n//     })\n//     .catch(error => {\n//       hideLoadingMessage(loadingMessage);\n//       console.log(error.message);\n//       iziToast.show({\n//         title: 'Error',\n//         iconUrl: `${errorImage}`,\n//         message: 'The link provided is incorrect.',\n//         messageColor: 'white',\n//         messageSize: '18px',\n//         backgroundColor: 'red',\n//         position: 'topRight',\n//       });\n//     })\n//     .finally(() => {\n//       setTimeout(() => {\n//         form.reset();\n//       }, 1000);\n//     });\n// }\n\n//\n\n// Ініціалізація SimpleLightbox\nlet galleryLightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionPosition: 'bottom',\n});\n\ngalleryLightbox.on('error.simplelightbox', function (e) {\n  console.log(e);\n});\n"],"names":["BASE_URL","API_KEY","serviceImages","search","page","data","axios","createMarkUp","arr","id","largeImageURL","webformatURL","tags","likes","views","comments","downloads","showLoadingMessage","loadingMessage","hideLoadingMessage","form","gallery","loadMore","handleSearch","event","searchImages","error","galleryLightbox","SimpleLightbox"],"mappings":"6vBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAcC,EAAQC,EAAO,EAAG,CACpD,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAM,GAAGN,CAAQ,GAAI,CAC1C,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,KAAAC,EACA,SAAU,EACX,CACL,CAAG,EACD,OAAOC,CACT,CCfO,SAASE,EAAaC,EAAK,CAChC,OAAOA,EACJ,IACC,CAAC,CACC,GAAAC,EACA,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC,qCAAqCP,CAAE;AAAA,kCACbC,CAAa;AAAA;AAAA;AAAA;AAAA,aAIlCC,CAAY;AAAA,aACZC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,iDAKgCC,CAAK;AAAA,iDACLC,CAAK;AAAA,oDACFC,CAAQ;AAAA,qDACPC,CAAS;AAAA;AAAA;AAAA,MAIzD,EACA,KAAK,EAAE,CACZ,CAEO,SAASC,EAAmBC,EAAgB,CACjDA,EAAe,MAAM,QAAU,OACjC,CAEO,SAASC,EAAmBD,EAAgB,CACjDA,EAAe,MAAM,QAAU,MACjC,CC1BA,MAAME,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CH,EAAiB,SAAS,cAAc,kBAAkB,EAC1DI,EAAW,SAAS,cAAc,eAAe,EAEvDF,EAAK,iBAAiB,SAAUG,CAAY,EAE5C,IAAIpB,EAAS,GACTC,EAAO,EAEX,SAASmB,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBrB,EAASqB,EAAM,OAAO,SAAS,OAAO,MAAM,OAC5CC,GACF,CASA,SAASA,GAAe,CACtBR,EAAmBC,CAAc,EAEjChB,EAAcC,EAAQC,CAAI,EACvB,KAAKC,GAAQ,CACZc,EAAmBD,CAAc,EACjCG,EAAQ,mBAAmB,YAAad,EAAaF,EAAK,IAAI,CAAC,EAC3DD,EAAO,KAAK,KAAKC,EAAK,UAAY,EAAE,GACtCiB,EAAS,UAAU,QAAQ,mBAAoB,WAAW,CAElE,CAAK,EACA,MAAMI,GAAS,MAAMA,EAAM,OAAO,CAAC,CACxC,CAiDA,IAAIC,EAAkB,IAAIC,EAAe,aAAc,CACrD,SAAU,GACV,aAAc,MACd,aAAc,IACd,gBAAiB,QACnB,CAAC,EAEDD,EAAgB,GAAG,uBAAwB,SAAU,EAAG,CACtD,QAAQ,IAAI,CAAC,CACf,CAAC"}